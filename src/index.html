<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üå≥ Knowledge Trees - –ú–æ–¥—É–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è</title>
    <meta name="description" content="–ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ –¥—Ä–µ–≤ –∑–Ω–∞–Ω–∏–π —Å –º–æ–¥—É–ª—å–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–æ–π">
    
    <!-- –°—Ç–∏–ª–∏ -->
    <link rel="stylesheet" href="../styles.css">
    
    <!-- Favicon -->
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üå≥</text></svg>">
</head>
<body>
    <div class="app-container">
        <!-- Header -->
        <header class="app-header">
            <div class="header-content">
                <div class="app-title">
                    <span class="app-icon">üå≥</span>
                    <h1>Knowledge Trees</h1>
                    <span class="version-badge">v2.0 Modular</span>
                </div>
                <div class="header-actions">
                    <button class="btn btn-primary" id="createBtn">
                        <span class="icon">‚ûï</span>
                        <span id="createBtnText">–°–æ–∑–¥–∞—Ç—å –¥–µ—Ä–µ–≤–æ</span>
                    </button>
                    <button class="btn btn-secondary" id="importBtn">
                        <span class="icon">üì•</span>
                        –ò–º–ø–æ—Ä—Ç
                    </button>
                    <button class="btn btn-secondary" id="exportCurrentBtn">
                        <span class="icon">üì§</span>
                        <span id="exportBtnText">–≠–∫—Å–ø–æ—Ä—Ç –¥–µ—Ä–µ–≤—å–µ–≤</span>
                    </button>
                    <button class="btn btn-secondary" id="exportAllBtn">
                        <span class="icon">üì¶</span>
                        –†–µ–∑–µ—Ä–≤–Ω–∞—è –∫–æ–ø–∏—è
                    </button>
                    <button class="btn btn-secondary" id="syncSettingsBtn">
                        <span class="icon">‚öôÔ∏è</span>
                        –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è
                    </button>
                </div>
            </div>
        </header>

        <!-- Main Content -->
        <main class="app-main">
            <!-- Sidebar -->
            <aside class="sidebar">
                <div class="sidebar-header">
                    <div class="category-tabs">
                        <button class="category-tab active" data-category="trees">
                            <span class="icon">üå≥</span>
                            –î–µ—Ä–µ–≤—å—è
                        </button>
                        <button class="category-tab" data-category="notes">
                            <span class="icon">üìù</span>
                            –ó–∞–º–µ—Ç–∫–∏
                        </button>
                    </div>
                    
                    <div class="search-container">
                        <input type="text" id="searchInput" class="search-input" placeholder="–ü–æ–∏—Å–∫ –¥–µ—Ä–µ–≤—å–µ–≤...">
                        <span class="search-icon">üîç</span>
                    </div>
                </div>
                
                <div class="trees-list" id="treesList">
                    <!-- –°–ø–∏—Å–æ–∫ –¥–µ—Ä–µ–≤—å–µ–≤ –±—É–¥–µ—Ç –∑–∞–≥—Ä—É–∂–∞—Ç—å—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
                </div>
                
                <div class="sidebar-footer">
                    <div class="stats">
                        <div class="stat-item">
                            <span class="stat-label">–î–µ—Ä–µ–≤—å–µ–≤:</span>
                            <span class="stat-value" id="totalTrees">0</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">–£–∑–ª–æ–≤:</span>
                            <span class="stat-value" id="totalNodes">0</span>
                        </div>
                    </div>
                </div>
            </aside>

            <!-- Content Area -->
            <section class="content-area">
                <!-- Welcome Screen -->
                <div class="welcome-screen" id="welcomeScreen">
                    <div class="welcome-content">
                        <div class="welcome-icon">üå≥</div>
                        <h2>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –ë–∏–±–ª–∏–æ—Ç–µ–∫—É –î—Ä–µ–≤ –ó–Ω–∞–Ω–∏–π</h2>
                        <p>–°–æ–∑–¥–∞–≤–∞–π—Ç–µ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–µ—Ä–µ–≤—å—è –∑–Ω–∞–Ω–∏–π –¥–ª—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –∏ –∏–¥–µ–π</p>
                        <div class="welcome-actions">
                            <button class="btn btn-primary btn-large" id="createFirstBtn">
                                <span class="icon">‚ûï</span>
                                <span id="createFirstBtnText">–°–æ–∑–¥–∞—Ç—å –ø–µ—Ä–≤–æ–µ –¥–µ—Ä–µ–≤–æ</span>
                            </button>
                            <button class="btn btn-secondary" id="createSampleBtn">
                                <span class="icon">üå±</span>
                                <span id="createSampleBtnText">–°–æ–∑–¥–∞—Ç—å –ø—Ä–∏–º–µ—Ä –¥–µ—Ä–µ–≤–∞</span>
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Tree Viewer -->
                <div class="tree-viewer" id="treeViewer" style="display: none;">
                    <div class="tree-header">
                        <div class="tree-title">
                            <h2 id="currentTreeTitle">–ù–∞–∑–≤–∞–Ω–∏–µ –¥–µ—Ä–µ–≤–∞</h2>
                            <div class="tree-actions">
                                <button class="btn btn-icon" id="editTreeBtn" title="–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å">
                                    <span class="icon">‚úèÔ∏è</span>
                                </button>
                                <button class="btn btn-icon" id="deleteTreeBtn" title="–£–¥–∞–ª–∏—Ç—å">
                                    <span class="icon">üóëÔ∏è</span>
                                </button>
                            </div>
                        </div>
                        <div class="tree-meta">
                            <span class="tree-date" id="currentTreeDate">–°–æ–∑–¥–∞–Ω–æ: --</span>
                            <span class="tree-nodes-count" id="currentTreeNodes">0 —É–∑–ª–æ–≤</span>
                        </div>
                    </div>

                    <div class="tree-content" id="treeContent">
                        <!-- –î–µ—Ä–µ–≤–æ –±—É–¥–µ—Ç –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è –∑–¥–µ—Å—å -->
                    </div>
                </div>
            </section>
        </main>
    </div>

    <!-- Modals -->
    
    <!-- Create/Edit Tree Modal -->
    <div class="modal" id="treeModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="treeModalTitle">–°–æ–∑–¥–∞—Ç—å –¥–µ—Ä–µ–≤–æ</h3>
                <button class="btn btn-icon modal-close" id="closeTreeModal">
                    <span class="icon">‚úï</span>
                </button>
            </div>
            <div class="modal-body">
                <form id="treeForm">
                    <div class="form-group">
                        <label for="treeName">–ù–∞–∑–≤–∞–Ω–∏–µ –¥–µ—Ä–µ–≤–∞</label>
                        <input type="text" id="treeName" class="form-input" placeholder="–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –¥–µ—Ä–µ–≤–∞" required>
                    </div>
                    <div class="form-group">
                        <label for="treeDescription">–û–ø–∏—Å–∞–Ω–∏–µ</label>
                        <textarea id="treeDescription" class="form-textarea" placeholder="–ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –¥–µ—Ä–µ–≤–∞ –∑–Ω–∞–Ω–∏–π" rows="3"></textarea>
                    </div>
                    <div class="form-group">
                        <label for="treeCategory">–ö–∞—Ç–µ–≥–æ—Ä–∏—è</label>
                        <select id="treeCategory" class="form-select">
                            <option value="business">üíº –ë–∏–∑–Ω–µ—Å</option>
                            <option value="technology">üíª –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏</option>
                            <option value="science">üî¨ –ù–∞—É–∫–∞</option>
                            <option value="education">üìö –û–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ</option>
                            <option value="personal">üë§ –õ–∏—á–Ω–æ–µ</option>
                            <option value="other" selected>üìÇ –î—Ä—É–≥–æ–µ</option>
                        </select>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary modal-close">–û—Ç–º–µ–Ω–∞</button>
                <button type="button" class="btn btn-primary" id="saveTree">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
            </div>
        </div>
    </div>

    <!-- GitHub Sync Settings Modal -->
    <div class="modal" id="syncModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ GitHub</h3>
                <button class="btn btn-icon modal-close" id="closeSyncModal">
                    <span class="icon">‚úï</span>
                </button>
            </div>
            <div class="modal-body">
                <div class="sync-settings">
                    <div class="form-group">
                        <label for="githubToken">GitHub Personal Access Token</label>
                        <input type="password" id="githubToken" class="form-input" placeholder="ghp_xxxxxxxxxxxxxxxxxxxx">
                        <small class="form-help">
                            <a href="https://github.com/settings/tokens" target="_blank">–°–æ–∑–¥–∞—Ç—å —Ç–æ–∫–µ–Ω</a> 
                            —Å –ø—Ä–∞–≤–∞–º–∏: repo (–¥–ª—è –ø—Ä–∏–≤–∞—Ç–Ω—ã—Ö —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–≤) –∏–ª–∏ public_repo (–¥–ª—è –ø—É–±–ª–∏—á–Ω—ã—Ö)
                        </small>
                    </div>
                    
                    <div class="form-group">
                        <label for="githubRepo">–†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π (username/repository)</label>
                        <input type="text" id="githubRepo" class="form-input" placeholder="myusername/knowledge-backup">
                        <small class="form-help">
                            –†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –±—É–¥–µ—Ç —Å–æ–∑–¥–∞–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏, –µ—Å–ª–∏ –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç.<br>
                            <strong>–ù–æ–≤—ã–π —Ñ–æ—Ä–º–∞—Ç:</strong> –í—Å–µ –¥–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ –æ–¥–∏–Ω —Ñ–∞–π–ª backup.json
                        </small>
                    </div>
                    
                    <div class="form-group">
                        <label for="syncBranch">–í–µ—Ç–∫–∞</label>
                        <input type="text" id="syncBranch" class="form-input" value="main" placeholder="main">
                    </div>
                    
                    <div class="form-group">
                        <label>
                            <input type="checkbox" id="autoSync">
                            –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö
                        </label>
                    </div>
                    
                    <div class="sync-status" id="syncStatus">
                        <div class="status-item">
                            <span class="status-label">–°—Ç–∞—Ç—É—Å:</span>
                            <span class="status-value" id="connectionStatus">–ù–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ</span>
                        </div>
                        <div class="status-item">
                            <span class="status-label">–ü–æ—Å–ª–µ–¥–Ω—è—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è:</span>
                            <span class="status-value" id="lastSync">–ù–∏–∫–æ–≥–¥–∞</span>
                        </div>
                    </div>
                    
                    <div class="sync-actions">
                        <button class="btn btn-secondary" id="testConnection">
                            <span class="icon">üîç</span>
                            –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ
                        </button>
                        <button class="btn btn-primary" id="syncNow">
                            <span class="icon">üì¶</span>
                            –°–æ–∑–¥–∞—Ç—å —Ä–µ–∑–µ—Ä–≤–Ω—É—é –∫–æ–ø–∏—é
                        </button>
                        <button class="btn btn-secondary" id="downloadFromGithub">
                            <span class="icon">üì•</span>
                            –ó–∞–≥—Ä—É–∑–∏—Ç—å —Å GitHub
                        </button>
                        <button class="btn btn-danger" id="clearRepository">
                            <span class="icon">üóëÔ∏è</span>
                            –û—á–∏—Å—Ç–∏—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
                        </button>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary modal-close">–ó–∞–∫—Ä—ã—Ç—å</button>
                <button type="button" class="btn btn-primary" id="saveSyncSettings">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏</button>
            </div>
        </div>
    </div>

    <!-- Import Modal -->
    <div class="modal" id="importModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>–ò–º–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö</h3>
                <button class="btn btn-icon modal-close" id="closeImportModal">
                    <span class="icon">‚úï</span>
                </button>
            </div>
            <div class="modal-body">
                <div class="import-info">
                    <p><strong>–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã:</strong></p>
                    <ul>
                        <li>üì¶ <strong>–ü–æ–ª–Ω–∞—è —Ä–µ–∑–µ—Ä–≤–Ω–∞—è –∫–æ–ø–∏—è</strong> - –≤—Å–µ –¥–∞–Ω–Ω—ã–µ —Å –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–º–∏</li>
                        <li>üì§ <strong>–ß–∞—Å—Ç–∏—á–Ω—ã–π —ç–∫—Å–ø–æ—Ä—Ç</strong> - —Ç–æ–ª—å–∫–æ –¥–µ—Ä–µ–≤—å—è –∏–ª–∏ –∑–∞–º–µ—Ç–∫–∏</li>
                        <li>üìÑ <strong>–°—Ç–∞—Ä—ã–π —Ñ–æ—Ä–º–∞—Ç</strong> - —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å –ø—Ä–µ–¥—ã–¥—É—â–∏–º–∏ –≤–µ—Ä—Å–∏—è–º–∏</li>
                    </ul>
                </div>
                <div class="form-group">
                    <label for="importFile">–í—ã–±–µ—Ä–∏—Ç–µ —Ñ–∞–π–ª JSON</label>
                    <input type="file" id="importFile" class="form-input" accept=".json">
                </div>
                <div class="form-group">
                    <label for="importText">–ò–ª–∏ –≤—Å—Ç–∞–≤—å—Ç–µ JSON —Ç–µ–∫—Å—Ç</label>
                    <textarea id="importText" class="form-textarea" placeholder="–í—Å—Ç–∞–≤—å—Ç–µ JSON –¥–∞–Ω–Ω—ã–µ —Ä–µ–∑–µ—Ä–≤–Ω–æ–π –∫–æ–ø–∏–∏ –∏–ª–∏ —ç–∫—Å–ø–æ—Ä—Ç–∞..." rows="8"></textarea>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary modal-close">–ó–∞–∫—Ä—ã—Ç—å</button>
                <button type="button" class="btn btn-primary" id="executeImport">–ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å</button>
            </div>
        </div>
    </div>

    <!-- Notification -->
    <div class="notification" id="notification" style="display: none;"></div>

    <!-- Debug Info -->
    <div class="debug-info" style="position: fixed; bottom: 10px; right: 10px; background: rgba(0,0,0,0.8); color: white; padding: 10px; border-radius: 5px; font-size: 12px; z-index: 10000;">
        <div>üèóÔ∏è Modular Architecture v2.0</div>
        <div>üìä <span id="debug-modules">Loading...</span></div>
        <div>üß™ Console: testApp(), testModules(), testSidebar()</div>
    </div>

    <!-- Scripts -->
    <script type="module" src="js/app.js"></script>
    
    <script>
        // –û–±–Ω–æ–≤–ª—è–µ–º debug info –ø–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏
        setTimeout(() => {
            const debugModules = document.getElementById('debug-modules');
            if (debugModules && window.app) {
                const moduleCount = [
                    window.app.dataManager,
                    window.app.treeManager,
                    window.app.notesManager,
                    window.app.uiManager,
                    window.app.githubSync
                ].filter(Boolean).length;
                debugModules.textContent = `${moduleCount}/5 modules loaded`;
            }
        }, 1000);
    </script>
</body>
</html>
