<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Knowledge Trees</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <h1>Test Knowledge Trees App</h1>
        <div id="debug-info">
            <p>Проверка функционала:</p>
            <button onclick="testApp()">Тест приложения</button>
            <button onclick="testSelectTree()">Тест выбора дерева</button>
            <button onclick="testDeleteItem()">Тест удаления</button>
        </div>
        
        <!-- Включаем основное приложение -->
        <div style="margin-top: 2rem;">
            <iframe src="knowledge-trees.html" width="100%" height="600px" style="border: 1px solid #ccc;"></iframe>
        </div>
    </div>

    <script>
        function testApp() {
            console.log('Testing app availability...');
            if (typeof window.app !== 'undefined') {
                console.log('✅ App is available globally');
                console.log('App object:', window.app);
            } else {
                console.log('❌ App is not available globally');
            }
        }

        function testSelectTree() {
            console.log('Testing selectTree function...');
            if (window.app && typeof window.app.selectTree === 'function') {
                console.log('✅ selectTree function exists');
                // Попробуем вызвать с тестовым ID
                window.app.selectTree('test-id');
            } else {
                console.log('❌ selectTree function not found');
            }
        }

        function testDeleteItem() {
            console.log('Testing deleteItem function...');
            if (window.app && typeof window.app.deleteItem === 'function') {
                console.log('✅ deleteItem function exists');
                // Не вызываем, чтобы не удалить данные
            } else {
                console.log('❌ deleteItem function not found');
            }
        }

        // Ждем загрузки iframe
        setTimeout(() => {
            const iframe = document.querySelector('iframe');
            if (iframe && iframe.contentWindow) {
                window.app = iframe.contentWindow.app;
                console.log('App from iframe:', window.app);
            }
        }, 2000);
    </script>
</body>
</html>
